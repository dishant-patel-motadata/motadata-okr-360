{
  "info": {
    "_postman_id": "okr360-feedback-collection",
    "name": "360 Feedback Platform API",
    "description": "Complete API test collection for the 360 Feedback Platform backend.\n\n**Setup:**\n1. Import this collection AND the companion environment `360-Feedback-Local.postman_environment.json`\n2. Select the `360 Feedback - Local` environment\n3. Start with **Auth → 01 Seed First Admin** (only once on a fresh DB)\n4. Run **Auth → 02 Login as CXO** — session cookie is saved automatically\n5. Follow the folder order top-to-bottom for a full end-to-end flow\n\n**Session handling:**  Login stores the `better-auth` session cookie in Postman's cookie jar. All subsequent requests automatically send it.\n\n**Auto-variables:**  Every create request extracts the new ID into a collection variable (e.g. `cycleId`, `assignmentId`, `reviewerId`) used by later requests.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "baseUrl",        "value": "http://localhost:3000", "type": "string" },
    { "key": "cycleId",        "value": "",                      "type": "string" },
    { "key": "employeeId",     "value": "EMP-002",               "type": "string" },
    { "key": "assignmentId",   "value": "",                      "type": "string" },
    { "key": "reviewerId",     "value": "",                      "type": "string" },
    { "key": "accessToken",    "value": "",                      "type": "string" },
    { "key": "competencyId",   "value": "COMM",                  "type": "string" },
    { "key": "questionId",     "value": "IC-01",                 "type": "string" }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Collection-level pre-request — nothing needed globally",
          "// Each folder handles its own auth state"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Collection-level test: log status for every request",
          "console.log(pm.request.method, pm.request.url.toString(), '->', pm.response.code);"
        ]
      }
    }
  ],
  "item": [

    {
      "name": "01 · Auth",
      "description": "Authentication endpoints. Run Seed Admin once, then Login to get a session cookie.",
      "item": [

        {
          "name": "01 Seed First Admin (run once)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/auth/seed-admin", "host": ["{{baseUrl}}"], "path": ["api","v1","auth","seed-admin"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"employeeId\": \"EMP-001\",\n  \"fullName\": \"HR Admin\",\n  \"email\": \"admin@company.com\",\n  \"password\": \"Admin@12345\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "if (pm.response.code === 201) {",
              "    pm.test('Admin created', () => pm.response.to.have.status(201));",
              "    const json = pm.response.json();",
              "    pm.test('has employeeId', () => pm.expect(json.data).to.have.property('employeeId'));",
              "} else if (pm.response.code === 403) {",
              "    pm.test('Admin already exists (expected on re-run)', () => pm.response.to.have.status(403));",
              "    console.log('Seed admin already ran — this is expected');",
              "}"
            ]}
          }]
        },

        {
          "name": "02 Login as CXO Admin",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/auth/sign-in/email", "host": ["{{baseUrl}}"], "path": ["api","auth","sign-in","email"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@company.com\",\n  \"password\": \"Admin@12345\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('Login successful', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('token returned', () => pm.expect(json).to.have.property('token'));",
              "// better-auth sets a Set-Cookie header — Postman stores it automatically in the cookie jar",
              "console.log('Logged in. Session cookie saved to cookie jar.');"
            ]}
          }]
        },

        {
          "name": "03 Get Current Session Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/auth/session", "host": ["{{baseUrl}}"], "path": ["api","auth","session"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "04 Get My Profile (/me)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/auth/me", "host": ["{{baseUrl}}"], "path": ["api","v1","auth","me"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has group_name', () => pm.expect(json.data).to.have.property('group_name'));",
              "pm.test('is CXO', () => pm.expect(json.data.group_name).to.eql('CXO'));"
            ]}
          }]
        },

        {
          "name": "05 Get My Profile — 401 when not logged in",
          "request": {
            "method": "GET",
            "header": [{ "key": "Cookie", "value": "", "disabled": true }],
            "url": { "raw": "{{baseUrl}}/api/v1/auth/me", "host": ["{{baseUrl}}"], "path": ["api","v1","auth","me"] }
          },
          "event": [{
            "listen": "prerequest",
            "script": { "type": "text/javascript", "exec": [
              "// NOTE: To test 401, clear cookies in Postman or use a separate Postman cookie jar"
            ]}
          },{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "// With valid session cookie this will return 200 (expected in normal flow)",
              "// To see 401, run in a fresh Postman session without logging in first",
              "console.log('Status:', pm.response.code, '(401 only if no session cookie is present)');"
            ]}
          }]
        },

        {
          "name": "06 Sign Out",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/auth/sign-out", "host": ["{{baseUrl}}"], "path": ["api","auth","sign-out"] },
            "body": { "mode": "raw", "raw": "{}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('Sign out OK', () => pm.response.to.have.status(200));",
              "console.log('Signed out — run Login again before the next tests');"
            ]}
          }]
        }

      ]
    },

    {
      "name": "02 · Employees",
      "description": "Employee management. Write operations (PATCH, sync) require CXO role. Login as CXO before running.",
      "item": [

        {
          "name": "01 List All Employees",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/employees?page=1&limit=20",
              "host": ["{{baseUrl}}"], "path": ["api","v1","employees"],
              "query": [
                { "key": "page",  "value": "1" },
                { "key": "limit", "value": "20" }
              ]
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('data is array', () => pm.expect(json.data).to.be.an('array'));",
              "pm.test('has meta', () => pm.expect(json).to.have.property('meta'));"
            ]}
          }]
        },

        {
          "name": "02 List Employees — Filter by group_name=IC",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/employees?group_name=IC&department=Engineering",
              "host": ["{{baseUrl}}"], "path": ["api","v1","employees"],
              "query": [
                { "key": "group_name",  "value": "IC" },
                { "key": "department",  "value": "Engineering" }
              ]
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "03 Get Employee by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/employees/{{employeeId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","employees","{{employeeId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has employee_id', () => pm.expect(json.data).to.have.property('employee_id'));"
            ]}
          }]
        },

        {
          "name": "04 Get Employee — 404 Not Found",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/employees/EMP-DOES-NOT-EXIST-9999", "host": ["{{baseUrl}}"], "path": ["api","v1","employees","EMP-DOES-NOT-EXIST-9999"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('404 Not Found', () => pm.response.to.have.status(404));"
            ]}
          }]
        },

        {
          "name": "05 Update Employee (CXO only)",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/employees/{{employeeId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","employees","{{employeeId}}"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"group_name\": \"IC\",\n  \"cross_functional_groups\": [\"Engineering\", \"Product\"],\n  \"applicable_competencies\": [\"COMM\", \"TEAM\", \"QUAL\"]\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "06 Update Employee — 422 Invalid group_name",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/employees/{{employeeId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","employees","{{employeeId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"group_name\": \"INVALID_ROLE\"\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));"
            ]}
          }]
        },

        {
          "name": "07 Trigger Manual AD Sync (CXO only)",
          "request": {
            "method": "POST",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/employees/sync", "host": ["{{baseUrl}}"], "path": ["api","v1","employees","sync"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 201', () => pm.expect([200, 201]).to.include(pm.response.code));"
            ]}
          }]
        },

        {
          "name": "08 Get AD Sync Logs (CXO only)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/employees/sync/logs?page=1&limit=10", "host": ["{{baseUrl}}"], "path": ["api","v1","employees","sync","logs"], "query": [{ "key": "page", "value": "1" }, { "key": "limit", "value": "10" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "03 · Review Cycles",
      "description": "Review cycle management. All operations require CXO role.",
      "item": [

        {
          "name": "01 Create Cycle",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cycle_name\": \"Q1 2026 Review\",\n  \"start_date\": \"2026-01-01\",\n  \"end_date\": \"2026-03-31\",\n  \"duration_months\": 3,\n  \"grace_period_days\": 3,\n  \"enable_self_feedback\": true,\n  \"enable_colleague_feedback\": true,\n  \"reminder_schedule\": [7, 3, 1]\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));",
              "const json = pm.response.json();",
              "pm.test('has cycle_id', () => pm.expect(json.data).to.have.property('cycle_id'));",
              "pm.collectionVariables.set('cycleId', json.data.cycle_id);",
              "console.log('cycleId saved:', json.data.cycle_id);"
            ]}
          }]
        },

        {
          "name": "02 Create Cycle — 422 Invalid Dates",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cycle_name\": \"Bad Cycle\",\n  \"start_date\": \"2026-03-31\",\n  \"end_date\": \"2026-01-01\",\n  \"duration_months\": 3\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));",
              "const json = pm.response.json();",
              "pm.test('has error details', () => pm.expect(json).to.have.property('errors'));"
            ]}
          }]
        },

        {
          "name": "03 List All Cycles",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('data is array', () => pm.expect(json.data).to.be.an('array'));"
            ]}
          }]
        },

        {
          "name": "04 List Cycles — Filter by status=DRAFT",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles?status=DRAFT", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles"], "query": [{ "key": "status", "value": "DRAFT" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "05 Get Cycle by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('status is DRAFT', () => pm.expect(json.data.status).to.eql('DRAFT'));"
            ]}
          }]
        },

        {
          "name": "06 Update Cycle (DRAFT only)",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles","{{cycleId}}"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cycle_name\": \"Q1 2026 Review (Updated)\",\n  \"grace_period_days\": 5\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "07 Activate Cycle (DRAFT → ACTIVE)",
          "request": {
            "method": "POST",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles/{{cycleId}}/activate", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles","{{cycleId}}","activate"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('status is ACTIVE', () => pm.expect(json.data.status).to.eql('ACTIVE'));"
            ]}
          }]
        },

        {
          "name": "08 Activate Cycle — 409 Already Active",
          "request": {
            "method": "POST",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles/{{cycleId}}/activate", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles","{{cycleId}}","activate"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('409 Conflict', () => pm.response.to.have.status(409));"
            ]}
          }]
        },

        {
          "name": "09 Publish Cycle (COMPLETED → PUBLISHED)",
          "request": {
            "method": "POST",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles/{{cycleId}}/publish", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles","{{cycleId}}","publish"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "// Cycle must be in COMPLETED status first (auto-transition or wait for end_date + grace period)",
              "// If cycle is ACTIVE/CLOSING, this returns 409",
              "if (pm.response.code === 200) {",
              "    pm.test('Published OK', () => pm.response.to.have.status(200));",
              "} else {",
              "    pm.test('409 if not yet COMPLETED (expected in test flow)', () => pm.response.to.have.status(409));",
              "    console.log('Cycle not COMPLETED yet — run score recalculation and wait for auto-transition');",
              "}"
            ]}
          }]
        },

        {
          "name": "10 Delete DRAFT Cycle",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "// Only works on DRAFT cycles — returns 409 if cycle is already ACTIVE",
              "if (pm.response.code === 200) {",
              "    pm.test('Deleted OK', () => pm.response.to.have.status(200));",
              "    pm.collectionVariables.set('cycleId', '');",
              "} else if (pm.response.code === 409) {",
              "    pm.test('409 — Cannot delete ACTIVE cycle (expected)', () => pm.response.to.have.status(409));",
              "}"
            ]}
          }]
        }

      ]
    },

    {
      "name": "04 · Competencies",
      "description": "Competency catalogue. Read: any authenticated user. Write: CXO only.",
      "item": [

        {
          "name": "01 List All Competencies",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/competencies", "host": ["{{baseUrl}}"], "path": ["api","v1","competencies"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('data is array', () => pm.expect(json.data).to.be.an('array'));"
            ]}
          }]
        },

        {
          "name": "02 List Competencies — Filter by applicable_to=IC",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/competencies?applicable_to=IC&is_active=true", "host": ["{{baseUrl}}"], "path": ["api","v1","competencies"], "query": [{ "key": "applicable_to", "value": "IC" }, { "key": "is_active", "value": "true" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "03 Get Competency by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/competencies/{{competencyId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","competencies","{{competencyId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "04 Create Competency (CXO only)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/competencies", "host": ["{{baseUrl}}"], "path": ["api","v1","competencies"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"competency_id\": \"INNOV\",\n  \"competency_name\": \"Innovation\",\n  \"description\": \"Ability to generate and implement new ideas\",\n  \"applicable_to\": [\"TM\", \"HOD\"]\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));"
            ]}
          }]
        },

        {
          "name": "05 Update Competency (CXO only)",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/competencies/INNOV", "host": ["{{baseUrl}}"], "path": ["api","v1","competencies","INNOV"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Drives creative thinking and measurable implementation\",\n  \"applicable_to\": [\"IC\", \"TM\", \"HOD\"]\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "06 Deactivate Competency (CXO only)",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/competencies/INNOV", "host": ["{{baseUrl}}"], "path": ["api","v1","competencies","INNOV"] },
            "body": { "mode": "raw", "raw": "{\n  \"is_active\": false\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('is_active is false', () => pm.expect(json.data.is_active).to.be.false);"
            ]}
          }]
        }

      ]
    },

    {
      "name": "05 · Questions",
      "description": "Question bank (IC, TM, HOD sets). Read: any authenticated user. Write: CXO only.",
      "item": [

        {
          "name": "01 List All Questions",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/questions", "host": ["{{baseUrl}}"], "path": ["api","v1","questions"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('data is array', () => pm.expect(json.data).to.be.an('array'));"
            ]}
          }]
        },

        {
          "name": "02 List Questions — IC Set",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/questions?set_type=IC", "host": ["{{baseUrl}}"], "path": ["api","v1","questions"], "query": [{ "key": "set_type", "value": "IC" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('all IC set', () => json.data.forEach(q => pm.expect(q.set_type).to.eql('IC')));"
            ]}
          }]
        },

        {
          "name": "03 List Questions — TM Set",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/questions?set_type=TM", "host": ["{{baseUrl}}"], "path": ["api","v1","questions"], "query": [{ "key": "set_type", "value": "TM" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "04 List Questions — HOD Set",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/questions?set_type=HOD", "host": ["{{baseUrl}}"], "path": ["api","v1","questions"], "query": [{ "key": "set_type", "value": "HOD" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "05 Get Question by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/questions/{{questionId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","questions","{{questionId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "06 Create Question (CXO only)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/questions", "host": ["{{baseUrl}}"], "path": ["api","v1","questions"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question_id\": \"IC-16\",\n  \"set_type\": \"IC\",\n  \"order_number\": 16,\n  \"question_text\": \"Demonstrates ethical and professional behaviour consistently\",\n  \"category\": \"Professionalism\",\n  \"competency_id\": \"PROF\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));"
            ]}
          }]
        },

        {
          "name": "07 Update Question (CXO only)",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/questions/IC-16", "host": ["{{baseUrl}}"], "path": ["api","v1","questions","IC-16"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question_text\": \"Consistently demonstrates ethical and inclusive behaviour\",\n  \"is_active\": true\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "08 Bulk Import Questions via CSV (CXO only)",
          "request": {
            "method": "POST",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/questions/import/csv", "host": ["{{baseUrl}}"], "path": ["api","v1","questions","import","csv"] },
            "body": {
              "mode": "formdata",
              "formdata": [{ "key": "file", "type": "file", "src": "/path/to/questions.csv", "description": "CSV with headers: question_id,set_type,order_number,question_text,category,competency_id" }]
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 201', () => pm.expect([200, 201]).to.include(pm.response.code));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "06 · Self-Feedback",
      "description": "Employee self-assessment. Use the logged-in employee's own cycleId. CXO required for completion view.",
      "item": [

        {
          "name": "01 Get Self-Feedback Form",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/self-feedback/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","self-feedback","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has competencies', () => pm.expect(json.data).to.have.property('applicable_competencies'));"
            ]}
          }]
        },

        {
          "name": "02 Save Draft Self-Feedback",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/self-feedback/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","self-feedback","{{cycleId}}"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"competency_ratings\": [\n    { \"competency_id\": \"COMM\", \"rating\": 3 },\n    { \"competency_id\": \"TEAM\", \"rating\": 4 },\n    { \"competency_id\": \"QUAL\", \"rating\": 3 },\n    { \"competency_id\": \"RELY\", \"rating\": 4 },\n    { \"competency_id\": \"INIT\", \"rating\": 3 }\n  ]\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('status is DRAFT', () => pm.expect(json.data.status).to.eql('DRAFT'));"
            ]}
          }]
        },

        {
          "name": "03 Save Draft — 422 Rating Out of Range",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/self-feedback/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","self-feedback","{{cycleId}}"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"competency_ratings\": [\n    { \"competency_id\": \"COMM\", \"rating\": 5 }\n  ]\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));"
            ]}
          }]
        },

        {
          "name": "04 Submit Self-Feedback (one-time lock)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/self-feedback/{{cycleId}}/submit", "host": ["{{baseUrl}}"], "path": ["api","v1","self-feedback","{{cycleId}}","submit"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"competency_ratings\": [\n    { \"competency_id\": \"COMM\", \"rating\": 3 },\n    { \"competency_id\": \"TEAM\", \"rating\": 4 },\n    { \"competency_id\": \"QUAL\", \"rating\": 3 },\n    { \"competency_id\": \"RELY\", \"rating\": 4 },\n    { \"competency_id\": \"INIT\", \"rating\": 3 }\n  ]\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('status is SUBMITTED', () => pm.expect(json.data.status).to.eql('SUBMITTED'));",
              "pm.test('has submitted_at', () => pm.expect(json.data).to.have.property('submitted_at'));"
            ]}
          }]
        },

        {
          "name": "05 Submit Again — 409 Already Submitted",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/self-feedback/{{cycleId}}/submit", "host": ["{{baseUrl}}"], "path": ["api","v1","self-feedback","{{cycleId}}","submit"] },
            "body": { "mode": "raw", "raw": "{\n  \"competency_ratings\": []\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('409 Conflict', () => pm.response.to.have.status(409));"
            ]}
          }]
        },

        {
          "name": "06 Get Completion Status for All Employees (CXO only)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/self-feedback/{{cycleId}}/completion", "host": ["{{baseUrl}}"], "path": ["api","v1","self-feedback","{{cycleId}}","completion"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "07 · Assignments",
      "description": "Survey assignment management. All operations require CXO role.",
      "item": [

        {
          "name": "01 Create Assignment",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"employee_id\": \"{{employeeId}}\",\n  \"cycle_id\": \"{{cycleId}}\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));",
              "const json = pm.response.json();",
              "pm.test('has assignment_id', () => pm.expect(json.data).to.have.property('assignment_id'));",
              "pm.collectionVariables.set('assignmentId', json.data.assignment_id);",
              "console.log('assignmentId saved:', json.data.assignment_id);"
            ]}
          }]
        },

        {
          "name": "02 List Assignments for Cycle",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments?cycle_id={{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments"], "query": [{ "key": "cycle_id", "value": "{{cycleId}}" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "03 Get Assignment Completion Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments/status?cycle_id={{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments","status"], "query": [{ "key": "cycle_id", "value": "{{cycleId}}" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "04 Get One Assignment",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments/{{assignmentId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments","{{assignmentId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has reviewers list', () => pm.expect(json.data).to.have.property('reviewers'));"
            ]}
          }]
        },

        {
          "name": "05 Get Reviewer Suggestions for Assignment",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments/{{assignmentId}}/suggestions", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments","{{assignmentId}}","suggestions"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "06 Add Reviewer — MANAGER",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments/reviewers", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments","reviewers"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"assignment_id\": \"{{assignmentId}}\",\n  \"reviewer_employee_id\": \"EMP-001\",\n  \"reviewer_type\": \"MANAGER\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));",
              "const json = pm.response.json();",
              "pm.test('has reviewer_id', () => pm.expect(json.data).to.have.property('reviewer_id'));",
              "pm.collectionVariables.set('reviewerId', json.data.reviewer_id);",
              "pm.collectionVariables.set('accessToken', json.data.access_token || '');",
              "console.log('reviewerId saved:', json.data.reviewer_id);"
            ]}
          }]
        },

        {
          "name": "07 Add Reviewer — PEER",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments/reviewers", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments","reviewers"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"assignment_id\": \"{{assignmentId}}\",\n  \"reviewer_employee_id\": \"EMP-003\",\n  \"reviewer_type\": \"PEER\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));"
            ]}
          }]
        },

        {
          "name": "08 Add Reviewer — DIRECT_REPORT",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments/reviewers", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments","reviewers"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"assignment_id\": \"{{assignmentId}}\",\n  \"reviewer_employee_id\": \"EMP-004\",\n  \"reviewer_type\": \"DIRECT_REPORT\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', () => pm.response.to.have.status(201));"
            ]}
          }]
        },

        {
          "name": "09 Remove Reviewer",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments/reviewers/{{reviewerId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments","reviewers","{{reviewerId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "10 Delete Assignment (Rollback)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/assignments/{{assignmentId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","assignments","{{assignmentId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "08 · Reviewers",
      "description": "Reviewer lookup. Token endpoint is public (no login needed).",
      "item": [

        {
          "name": "01 Get Reviewer by Access Token (public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/reviewers/by-token/{{accessToken}}", "host": ["{{baseUrl}}"], "path": ["api","v1","reviewers","by-token","{{accessToken}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has reviewer_id', () => pm.expect(json.data).to.have.property('reviewer_id'));"
            ]}
          }]
        },

        {
          "name": "02 Get My Pending Surveys",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/reviewers/pending", "host": ["{{baseUrl}}"], "path": ["api","v1","reviewers","pending"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('data is array', () => pm.expect(json.data).to.be.an('array'));"
            ]}
          }]
        },

        {
          "name": "03 Get Reviewer Record by ID (own or CXO)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/reviewers/{{reviewerId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","reviewers","{{reviewerId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "09 · Survey Responses",
      "description": "Survey form: get/save/submit. Dual-auth: session cookie OR ?token= param. Reopen requires CXO.",
      "item": [

        {
          "name": "01 Get Survey Form (session auth)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/surveys/form/{{reviewerId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","surveys","form","{{reviewerId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has questions', () => pm.expect(json.data).to.have.property('questions'));",
              "pm.test('has reviewer', () => pm.expect(json.data).to.have.property('reviewer'));",
              "pm.test('has ratee', () => pm.expect(json.data).to.have.property('ratee'));"
            ]}
          }]
        },

        {
          "name": "02 Get Survey Form (token auth — no login needed)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/surveys/form/{{reviewerId}}?token={{accessToken}}",
              "host": ["{{baseUrl}}"], "path": ["api","v1","surveys","form","{{reviewerId}}"],
              "query": [{ "key": "token", "value": "{{accessToken}}" }]
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "03 Save Draft Responses (session auth)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/surveys/form/{{reviewerId}}/save", "host": ["{{baseUrl}}"], "path": ["api","v1","surveys","form","{{reviewerId}}","save"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"responses\": [\n    { \"question_id\": \"IC-01\", \"rating\": 3 },\n    { \"question_id\": \"IC-02\", \"rating\": 4 },\n    { \"question_id\": \"IC-03\", \"rating\": 3 },\n    { \"question_id\": \"IC-04\", \"rating\": 4 },\n    { \"question_id\": \"IC-05\", \"rating\": 3 }\n  ]\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('reviewer status is IN_PROGRESS', () => pm.expect(json.data.reviewer_status).to.eql('IN_PROGRESS'));"
            ]}
          }]
        },

        {
          "name": "04 Save Draft — 422 Rating Out of Range",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/surveys/form/{{reviewerId}}/save", "host": ["{{baseUrl}}"], "path": ["api","v1","surveys","form","{{reviewerId}}","save"] },
            "body": { "mode": "raw", "raw": "{\n  \"responses\": [\n    { \"question_id\": \"IC-01\", \"rating\": 5 }\n  ]\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));"
            ]}
          }]
        },

        {
          "name": "05 Submit Survey (all 15 IC questions)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/surveys/form/{{reviewerId}}/submit", "host": ["{{baseUrl}}"], "path": ["api","v1","surveys","form","{{reviewerId}}","submit"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"responses\": [\n    { \"question_id\": \"IC-01\", \"rating\": 3 },\n    { \"question_id\": \"IC-02\", \"rating\": 4 },\n    { \"question_id\": \"IC-03\", \"rating\": 3 },\n    { \"question_id\": \"IC-04\", \"rating\": 4 },\n    { \"question_id\": \"IC-05\", \"rating\": 3 },\n    { \"question_id\": \"IC-06\", \"rating\": 4 },\n    { \"question_id\": \"IC-07\", \"rating\": 3 },\n    { \"question_id\": \"IC-08\", \"rating\": 4 },\n    { \"question_id\": \"IC-09\", \"rating\": 3 },\n    { \"question_id\": \"IC-10\", \"rating\": 4 },\n    { \"question_id\": \"IC-11\", \"rating\": 3 },\n    { \"question_id\": \"IC-12\", \"rating\": 4 },\n    { \"question_id\": \"IC-13\", \"rating\": 3 },\n    { \"question_id\": \"IC-14\", \"rating\": 4 },\n    { \"question_id\": \"IC-15\", \"rating\": 3 }\n  ],\n  \"comment\": \"Great colleague — consistently supportive and professional.\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('reviewer status is COMPLETED', () => pm.expect(json.data.reviewer_status).to.eql('COMPLETED'));",
              "pm.test('has completed_at', () => pm.expect(json.data).to.have.property('completed_at'));"
            ]}
          }]
        },

        {
          "name": "06 Submit Again — 409 Already Completed",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/surveys/form/{{reviewerId}}/submit", "host": ["{{baseUrl}}"], "path": ["api","v1","surveys","form","{{reviewerId}}","submit"] },
            "body": { "mode": "raw", "raw": "{\n  \"responses\": []\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('409 Already Submitted', () => pm.response.to.have.status(409));"
            ]}
          }]
        },

        {
          "name": "07 Admin Submit On Behalf (CXO, RC-14)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/surveys/form/{{reviewerId}}/on-behalf", "host": ["{{baseUrl}}"], "path": ["api","v1","surveys","form","{{reviewerId}}","on-behalf"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"responses\": [\n    { \"question_id\": \"IC-01\", \"rating\": 4 },\n    { \"question_id\": \"IC-02\", \"rating\": 3 },\n    { \"question_id\": \"IC-03\", \"rating\": 4 },\n    { \"question_id\": \"IC-04\", \"rating\": 3 },\n    { \"question_id\": \"IC-05\", \"rating\": 4 },\n    { \"question_id\": \"IC-06\", \"rating\": 3 },\n    { \"question_id\": \"IC-07\", \"rating\": 4 },\n    { \"question_id\": \"IC-08\", \"rating\": 3 },\n    { \"question_id\": \"IC-09\", \"rating\": 4 },\n    { \"question_id\": \"IC-10\", \"rating\": 3 },\n    { \"question_id\": \"IC-11\", \"rating\": 4 },\n    { \"question_id\": \"IC-12\", \"rating\": 3 },\n    { \"question_id\": \"IC-13\", \"rating\": 4 },\n    { \"question_id\": \"IC-14\", \"rating\": 3 },\n    { \"question_id\": \"IC-15\", \"rating\": 4 }\n  ],\n  \"comment\": \"Submitted on behalf by admin.\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK (CXO only)', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "08 Reopen Survey (CXO, RC-15)",
          "request": {
            "method": "POST",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/surveys/form/{{reviewerId}}/reopen", "host": ["{{baseUrl}}"], "path": ["api","v1","surveys","form","{{reviewerId}}","reopen"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('reviewer status is IN_PROGRESS', () => pm.expect(json.data.reviewer_status).to.eql('IN_PROGRESS'));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "10 · Scores",
      "description": "Score calculation and retrieval. Recalculate requires CXO. Cycle scores require CXO.",
      "item": [

        {
          "name": "01 Get My Historical Scores",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/scores/my", "host": ["{{baseUrl}}"], "path": ["api","v1","scores","my"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('data is array', () => pm.expect(json.data).to.be.an('array'));"
            ]}
          }]
        },

        {
          "name": "02 Get All Scores for a Cycle (CXO only)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/scores/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","scores","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has cycle info', () => pm.expect(json.data).to.have.property('cycle'));",
              "pm.test('has scores array', () => pm.expect(json.data.scores).to.be.an('array'));"
            ]}
          }]
        },

        {
          "name": "03 Force Recalculate Scores for Cycle (CXO only)",
          "request": {
            "method": "POST",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/scores/cycle/{{cycleId}}/recalculate", "host": ["{{baseUrl}}"], "path": ["api","v1","scores","cycle","{{cycleId}}","recalculate"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK or 404/409', () => pm.expect([200, 404, 409]).to.include(pm.response.code));",
              "if (pm.response.code === 200) {",
              "    const json = pm.response.json();",
              "    pm.test('has calculated count', () => pm.expect(json.data).to.have.property('calculated'));",
              "    console.log('Recalculation result:', JSON.stringify(json.data));",
              "} else {",
              "    console.log('Recalculate status:', pm.response.code, '— cycle may not be COMPLETED yet');",
              "}"
            ]}
          }]
        },

        {
          "name": "04 Get Employee Scorecard (own)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/scores/employee/{{employeeId}}/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","scores","employee","{{employeeId}}","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));",
              "if (pm.response.code === 200) {",
              "    const json = pm.response.json();",
              "    pm.test('has final_label', () => pm.expect(json.data).to.have.property('final_label'));",
              "    pm.test('has colleague_score', () => pm.expect(json.data).to.have.property('colleague_score'));",
              "}"
            ]}
          }]
        },

        {
          "name": "05 Get Employee Self vs Department Comparison",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/scores/employee/{{employeeId}}/cycle/{{cycleId}}/comparison", "host": ["{{baseUrl}}"], "path": ["api","v1","scores","employee","{{employeeId}}","cycle","{{cycleId}}","comparison"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "11 · Results / Dashboards",
      "description": "Dashboard result APIs. Access depends on role: IC sees own data, TM sees team, HOD sees dept, CXO sees all.",
      "item": [

        {
          "name": "01 Employee Dashboard — Own Results",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/results/employee/{{employeeId}}/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","results","employee","{{employeeId}}","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));"
            ]}
          }]
        },

        {
          "name": "02 Employee Dashboard — Anonymised Comments",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/results/employee/{{employeeId}}/cycle/{{cycleId}}/comments", "host": ["{{baseUrl}}"], "path": ["api","v1","results","employee","{{employeeId}}","cycle","{{cycleId}}","comments"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));"
            ]}
          }]
        },

        {
          "name": "03 Team Dashboard (TM / HOD / CXO only)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/results/team/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","results","team","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 403 or 404', () => pm.expect([200, 403, 404]).to.include(pm.response.code));"
            ]}
          }]
        },

        {
          "name": "04 Department Dashboard (HOD / CXO only)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/results/department/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","results","department","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 403 or 404', () => pm.expect([200, 403, 404]).to.include(pm.response.code));"
            ]}
          }]
        },

        {
          "name": "05 Org-Wide Dashboard (CXO only)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/results/org/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","results","org","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "12 · Reports (PDF & CSV)",
      "description": "Report generation. All require CXO role. PDF responses are binary — use 'Save Response' in Postman.",
      "item": [

        {
          "name": "01 Individual Employee PDF Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/reports/individual/{{employeeId}}/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","reports","individual","{{employeeId}}","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));",
              "if (pm.response.code === 200) {",
              "    pm.test('content-type is PDF', () => pm.expect(pm.response.headers.get('Content-Type')).to.include('application/pdf'));",
              "    console.log('PDF generated. Use Send and Download to save the file.');",
              "}"
            ]}
          }]
        },

        {
          "name": "02 Department Summary PDF",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/reports/department/cycle/{{cycleId}}?department=Engineering", "host": ["{{baseUrl}}"], "path": ["api","v1","reports","department","cycle","{{cycleId}}"], "query": [{ "key": "department", "value": "Engineering" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));"
            ]}
          }]
        },

        {
          "name": "03 Organisation Summary PDF",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/reports/org/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","reports","org","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));"
            ]}
          }]
        },

        {
          "name": "04 Raw Data CSV Export",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/reports/export/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","reports","export","cycle","{{cycleId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 or 404', () => pm.expect([200, 404]).to.include(pm.response.code));",
              "if (pm.response.code === 200) {",
              "    pm.test('content-type is CSV', () => pm.expect(pm.response.headers.get('Content-Type')).to.include('text/csv'));",
              "    console.log('CSV export ready. Use Send and Download to save the file.');",
              "}"
            ]}
          }]
        }

      ]
    },

    {
      "name": "13 · Admin",
      "description": "Admin-only utilities: system dashboard, reviewer config, audit log. All require CXO role.",
      "item": [

        {
          "name": "01 System Dashboard — No Filter",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/dashboard", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","dashboard"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has employees', () => pm.expect(json.data).to.have.property('employees'));"
            ]}
          }]
        },

        {
          "name": "02 System Dashboard — With Cycle ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/dashboard?cycle_id={{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","dashboard"], "query": [{ "key": "cycle_id", "value": "{{cycleId}}" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has cycle data', () => pm.expect(json.data).to.have.property('cycle'));"
            ]}
          }]
        },

        {
          "name": "03 System Dashboard — 422 Invalid UUID",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/dashboard?cycle_id=not-a-uuid", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","dashboard"], "query": [{ "key": "cycle_id", "value": "not-a-uuid" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));"
            ]}
          }]
        },

        {
          "name": "04 Get Reviewer Config",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/reviewer-config", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","reviewer-config"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('has min_reviewers', () => pm.expect(json.data).to.have.property('min_reviewers'));",
              "pm.test('has max_reviewers', () => pm.expect(json.data).to.have.property('max_reviewers'));",
              "console.log('Current config:', JSON.stringify(json.data));"
            ]}
          }]
        },

        {
          "name": "05 Update Reviewer Config — Both Fields",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/reviewer-config", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","reviewer-config"] },
            "body": { "mode": "raw", "raw": "{\n  \"min_reviewers\": 3,\n  \"max_reviewers\": 10\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('min updated', () => pm.expect(json.data.min_reviewers).to.eql(3));",
              "pm.test('max updated', () => pm.expect(json.data.max_reviewers).to.eql(10));"
            ]}
          }]
        },

        {
          "name": "06 Update Reviewer Config — Only max_reviewers",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/reviewer-config", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","reviewer-config"] },
            "body": { "mode": "raw", "raw": "{\n  \"max_reviewers\": 12\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "07 Update Reviewer Config — 422 min > max",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/reviewer-config", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","reviewer-config"] },
            "body": { "mode": "raw", "raw": "{\n  \"min_reviewers\": 10,\n  \"max_reviewers\": 5\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));"
            ]}
          }]
        },

        {
          "name": "08 Update Reviewer Config — 422 Empty Body",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/reviewer-config", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","reviewer-config"] },
            "body": { "mode": "raw", "raw": "{}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));"
            ]}
          }]
        },

        {
          "name": "09 Get Audit Logs — All",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/audit-logs?page=1&limit=20", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","audit-logs"], "query": [{ "key": "page", "value": "1" }, { "key": "limit", "value": "20" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "const json = pm.response.json();",
              "pm.test('data is array', () => pm.expect(json.data).to.be.an('array'));",
              "pm.test('has meta.total', () => pm.expect(json.meta).to.have.property('total'));",
              "pm.test('has meta.page',  () => pm.expect(json.meta).to.have.property('page'));"
            ]}
          }]
        },

        {
          "name": "10 Get Audit Logs — Filter by action_type",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/audit-logs?action_type=UPDATE&entity_type=review_cycles&page=1&limit=10",
              "host": ["{{baseUrl}}"], "path": ["api","v1","admin","audit-logs"],
              "query": [
                { "key": "action_type",  "value": "UPDATE" },
                { "key": "entity_type",  "value": "review_cycles" },
                { "key": "page",         "value": "1" },
                { "key": "limit",        "value": "10" }
              ]
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "11 Get Audit Logs — Filter by Date Range",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/audit-logs?from=2026-01-01&to=2026-12-31",
              "host": ["{{baseUrl}}"], "path": ["api","v1","admin","audit-logs"],
              "query": [
                { "key": "from", "value": "2026-01-01" },
                { "key": "to",   "value": "2026-12-31" }
              ]
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));"
            ]}
          }]
        },

        {
          "name": "12 Get Audit Logs — 422 page=0",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/audit-logs?page=0", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","audit-logs"], "query": [{ "key": "page", "value": "0" }] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));"
            ]}
          }]
        }

      ]
    },

    {
      "name": "14 · Error Cases & Security",
      "description": "Cross-cutting tests: 401, 403, 404, 422, unknown routes. Run these at any point to verify guards.",
      "item": [

        {
          "name": "01 Unknown Route — 404",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/does-not-exist", "host": ["{{baseUrl}}"], "path": ["api","v1","does-not-exist"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('404 Not Found', () => pm.response.to.have.status(404));",
              "pm.test('error is NOT_FOUND', () => pm.expect(pm.response.json().error).to.eql('NOT_FOUND'));"
            ]}
          }]
        },

        {
          "name": "02 Health Check (no auth needed)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/health", "host": ["{{baseUrl}}"], "path": ["health"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', () => pm.response.to.have.status(200));",
              "pm.test('success true', () => pm.expect(pm.response.json().success).to.be.true);"
            ]}
          }]
        },

        {
          "name": "03 Cycle — 403 Access Without CXO Role",
          "event": [{
            "listen": "prerequest",
            "script": { "type": "text/javascript", "exec": [
              "// To test: log in as IC employee first, then run this request",
              "console.log('IMPORTANT: Log in as an IC employee to see 403 here');"
            ]}
          },{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "// Expected 403 when logged in as IC; 200 if you are still logged in as CXO",
              "console.log('Status:', pm.response.code, '(403 if IC session is active, 200 if CXO)')"
            ]}
          }],
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/cycles", "host": ["{{baseUrl}}"], "path": ["api","v1","cycles"] }
          }
        },

        {
          "name": "04 Scores Cycle — 403 for non-CXO",
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "// Expected 403 when logged in as IC; 200 if logged in as CXO",
              "console.log('Status:', pm.response.code, '(403 if IC, 200 if CXO)');"
            ]}
          }],
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/scores/cycle/{{cycleId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","scores","cycle","{{cycleId}}"] }
          }
        },

        {
          "name": "05 Admin Dashboard — 403 for non-CXO",
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "console.log('Status:', pm.response.code, '(403 if IC session, 200 if CXO)');"
            ]}
          }],
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/v1/admin/dashboard", "host": ["{{baseUrl}}"], "path": ["api","v1","admin","dashboard"] }
          }
        },

        {
          "name": "06 Seed Admin — 422 Weak Password",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/v1/auth/seed-admin", "host": ["{{baseUrl}}"], "path": ["api","v1","auth","seed-admin"] },
            "body": { "mode": "raw", "raw": "{\n  \"employeeId\": \"EMP-999\",\n  \"fullName\": \"Test\",\n  \"email\": \"test@company.com\",\n  \"password\": \"weak\"\n}" }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('422 Validation Error', () => pm.response.to.have.status(422));"
            ]}
          }]
        }

      ]
    }

  ]
}
